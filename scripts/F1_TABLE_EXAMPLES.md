# analyze_f1.py ç¾è§‚è¡¨æ ¼åŠŸèƒ½ä½¿ç”¨æŒ‡å—

## ğŸ¨ æ–°å¢åŠŸèƒ½

1. **ç¾è§‚çš„è¡¨æ ¼è¾“å‡º**ï¼ˆä½¿ç”¨ tabulate åº“ï¼‰
2. **å¤šç§è¡¨æ ¼æ ¼å¼**ï¼ˆgrid, fancy_grid, github, markdown ç­‰ï¼‰
3. **æŒ‰ç±»åˆ«å¯¹æ¯”æ¨¡å‹**
4. **æ’åæ˜¾ç¤º**ï¼ˆğŸ¥‡ğŸ¥ˆğŸ¥‰ï¼‰

---

## ğŸ“¦ å®‰è£…ä¾èµ–ï¼ˆå¯é€‰ï¼Œä½†æ¨èï¼‰

```bash
pip install tabulate
```

**æ³¨æ„ï¼š** å¦‚æœä¸å®‰è£… tabulateï¼Œè„šæœ¬ä¼šè‡ªåŠ¨é™çº§åˆ°ç®€å•æ–‡æœ¬æ ¼å¼ï¼Œä¸ä¼šæŠ¥é”™ã€‚

---

## ğŸš€ ä½¿ç”¨ç¤ºä¾‹

### 1. åŸºç¡€ç”¨æ³•ï¼ˆé»˜è®¤ grid æ ¼å¼ï¼‰

```bash
python3 scripts/analyze_f1.py
```

### 2. ä½¿ç”¨ fancy_grid æ ¼å¼ï¼ˆæœ€ç¾è§‚ï¼‰

```bash
python3 scripts/analyze_f1.py --table-format fancy_grid
```

### 3. GitHub Markdown æ ¼å¼ï¼ˆé€‚åˆæ–‡æ¡£ï¼‰

```bash
python3 scripts/analyze_f1.py --table-format github
```

### 4. å¯¼å‡º CSV + æ˜¾ç¤ºç±»åˆ«å¯¹æ¯”

```bash
python3 scripts/analyze_f1.py --export-csv results.csv --category-comparison
```

### 5. åªåˆ†æç‰¹å®šæ¨¡å‹

```bash
python3 scripts/analyze_f1.py --model mistral --table-format fancy_grid
```

### 6. åªåˆ†æ RAG æ–¹æ³•

```bash
python3 scripts/analyze_f1.py --method rag_hf_llm --category-comparison
```

---

## ğŸ¨ æ”¯æŒçš„è¡¨æ ¼æ ¼å¼

| æ ¼å¼ | æè¿° | é€‚ç”¨åœºæ™¯ |
|------|------|---------|
| `plain` | çº¯æ–‡æœ¬ï¼Œæ— è¾¹æ¡† | ç®€å•è¾“å‡º |
| `simple` | ç®€å•è¾¹æ¡† | ç»ˆç«¯æŸ¥çœ‹ |
| `grid` | ç½‘æ ¼è¾¹æ¡†ï¼ˆ**é»˜è®¤**ï¼‰ | å¹³è¡¡ç¾è§‚å’Œå…¼å®¹æ€§ |
| `fancy_grid` | åŒçº¿ç½‘æ ¼ï¼ˆ**æœ€ç¾è§‚**ï¼‰ | ç»ˆç«¯æ¼”ç¤º |
| `pipe` | ç®¡é“ç¬¦åˆ†éš” | è½»é‡çº§è¡¨æ ¼ |
| `github` | GitHub Markdown | æ–‡æ¡£ã€README |
| `rst` | reStructuredText | Sphinx æ–‡æ¡£ |
| `html` | HTML è¡¨æ ¼ | ç½‘é¡µå±•ç¤º |
| `latex` | LaTeX è¡¨æ ¼ | å­¦æœ¯è®ºæ–‡ |

---

## ğŸ“Š è¾“å‡ºç¤ºä¾‹

### Grid æ ¼å¼ï¼ˆé»˜è®¤ï¼‰
```
â•’â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â••
â”‚ Category   â”‚   Questions â”‚ Avg F1    â”‚
â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•¡
â”‚ Cat 1      â”‚          50 â”‚ 0.8542    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Cat 2      â”‚          30 â”‚ 0.7234    â”‚
â•˜â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•›
```

### Fancy Grid æ ¼å¼ï¼ˆæœ€ç¾è§‚ï¼‰
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ Category   â”‚   Questions â”‚ Avg F1    â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Cat 1      â”‚          50 â”‚ 0.8542    â•‘
â•Ÿâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¢
â•‘ Cat 2      â”‚          30 â”‚ 0.7234    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•
```

### GitHub Markdown æ ¼å¼
```
| Category   |   Questions | Avg F1   |
|------------|-------------|----------|
| Cat 1      |          50 | 0.8542   |
| Cat 2      |          30 | 0.7234   |
```

---

## ğŸ†• æ–°åŠŸèƒ½è¯´æ˜

### 1. æ’åæ˜¾ç¤º
æ¨¡å‹å¯¹æ¯”æ—¶ä¼šè‡ªåŠ¨æ˜¾ç¤ºæ’åï¼š
- ğŸ¥‡ ç¬¬ä¸€å
- ğŸ¥ˆ ç¬¬äºŒå  
- ğŸ¥‰ ç¬¬ä¸‰å
- 4., 5., ... åç»­æ’å

### 2. ç±»åˆ«å¯¹æ¯”çŸ©é˜µï¼ˆ--category-comparisonï¼‰
æ¨ªå‘å¯¹æ¯”æ‰€æœ‰æ¨¡å‹åœ¨å„ä¸ªç±»åˆ«ä¸Šçš„è¡¨ç°ï¼š

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ Category   â”‚ Model A      â”‚ Model B      â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ Cat 1      â”‚ 0.8542       â”‚ 0.8231       â•‘
â•‘ Cat 2      â”‚ 0.7234       â”‚ 0.7556       â•‘
â•‘ Overall    â”‚ 0.7888       â”‚ 0.7893       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

### 3. è‡ªåŠ¨é™çº§
å¦‚æœæ²¡æœ‰å®‰è£… tabulateï¼Œè„šæœ¬ä¼šï¼š
- âš ï¸ æ˜¾ç¤ºå‹å¥½æç¤º
- âœ… è‡ªåŠ¨ä½¿ç”¨ç®€å•æ–‡æœ¬æ ¼å¼
- âœ… æ‰€æœ‰åŠŸèƒ½æ­£å¸¸å·¥ä½œ

---

## ğŸ’¡ æœ€ä½³å®è·µ

### æ—¥å¸¸ä½¿ç”¨ï¼ˆå¿«é€ŸæŸ¥çœ‹ï¼‰
```bash
python3 scripts/analyze_f1.py --table-format fancy_grid
```

### ç”ŸæˆæŠ¥å‘Šï¼ˆæ–‡æ¡£ï¼‰
```bash
python3 scripts/analyze_f1.py \
    --table-format github \
    --category-comparison \
    --export-csv full_report.csv \
    > report.md
```

### å¯¹æ¯” RAG vs çº¯ LLM
```bash
# æŸ¥çœ‹æ‰€æœ‰ç»“æœ
python3 scripts/analyze_f1.py --category-comparison --table-format fancy_grid

# åªçœ‹çº¯ LLM
python3 scripts/analyze_f1.py --method hf_llm --table-format grid

# åªçœ‹ RAG
python3 scripts/analyze_f1.py --method rag_hf_llm --table-format grid
```

---

## ğŸ› æ•…éšœæ’é™¤

### é—®é¢˜ï¼šè¡¨æ ¼æ˜¾ç¤ºä¹±ç 
**è§£å†³æ–¹æ¡ˆï¼š** ç¡®ä¿ç»ˆç«¯æ”¯æŒ UTF-8 ç¼–ç 

### é—®é¢˜ï¼šæç¤º "tabulate library not found"
**è§£å†³æ–¹æ¡ˆï¼š** 
```bash
pip install tabulate
```
æˆ–è€…å¿½ç•¥æç¤ºï¼Œè„šæœ¬ä¼šä½¿ç”¨ç®€å•æ ¼å¼

### é—®é¢˜ï¼šè¡¨æ ¼å¤ªå®½ï¼Œè¶…å‡ºç»ˆç«¯
**è§£å†³æ–¹æ¡ˆï¼š** ä½¿ç”¨ `simple` æˆ– `plain` æ ¼å¼
```bash
python3 scripts/analyze_f1.py --table-format simple
```

---

## ğŸ“ å®Œæ•´å‚æ•°åˆ—è¡¨

```bash
python3 scripts/analyze_f1.py \
    --output-dir ./outputs \              # è¾“å‡ºç›®å½•
    --model mistral \                     # è¿‡æ»¤ç‰¹å®šæ¨¡å‹
    --method all \                        # all/hf_llm/rag_hf_llm
    --table-format fancy_grid \           # è¡¨æ ¼æ ¼å¼
    --category-comparison \               # æ˜¾ç¤ºç±»åˆ«å¯¹æ¯”
    --export-csv results.csv              # å¯¼å‡º CSV
```
